<div class="row">

  <div class="col-md-12">
    <div class="box">
      <div class="box-header with-border">
        <h3 class="box-title">Records</h3>
      </div>
      <div class="box-body">
        <table class="table table-bordered">
	<tbody>
	  <tr>
	    <th>Name</th>
	    <th>Collection</th>
	    <th></th>
	  </tr>
          <% @crud_records.each do |crud_record| %>
	    <tr>
	      <td><a href="/records/view/<%= crud_record.id %>"><%= crud_record.name || crud_record.id %></a></td>
	      <td><%= crud_record.collection_name %></td>
	      <td><button class="delete-record" data-id="<%= crud_record.id %>">Delete</button></td>
	    </tr>
	  <% end %>
	</tbody>
	</table>
      </div>
      <div class="box-footer">
      </div>
    </div>
  </div>

</div>

<script type="text/javascript">

var func = function() {
  $('.delete-record').click(function() {
    selector = $(this)
    id = selector.attr('data-id')
    console.log(id);
    if (confirm('Are you sure you want to delete this?'))
      $.ajax({
        url: '/records/delete',
        method: 'POST',
        data: { id: id },
        success: function() { $(selector.parent()).html('Deleted'); }
      });
  } );
};

jQuery(func);

</script>
